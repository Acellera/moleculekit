parameters:
  name: ''  # defaults for any parameters that aren't specified
  displayName: ''
  vmImage: ''
  OS: ''

jobs:
  - job: ${{ parameters.name }}
    displayName: ${{ parameters.displayName }}
    pool:    
      vmImage: ${{ parameters.vmImage }}

    continueOnError: false
    
    strategy:
      matrix:
        Python36:
          python.version: '3.6'
        Python37:
          python.version: '3.7'
        Python38:
          python.version: '3.8'
        # Need to wait for numba to support 3.9. Should be done around March 2021 https://github.com/numba/numba/issues/6345 
        # Python39:
        #   python.version: '3.9'
      maxParallel: 4

    variables:
      OS: ${{ parameters.OS }}

    steps:
    - template: templates/conda_config.yml
    - template: templates/run_tests.yml